{% extends "base.html" %}
{% block contenido %}
<h1 class="h3 mb-3">
  {% if modo == "nuevo" %}
    Nuevo contacto
  {% else %}
    Editar contacto
  {% endif %}
</h1>

<form method="post" novalidate>
  <div class="mb-3">
    <label for="nombre" class="form-label">Nombre *</label>
    <input type="text" name="nombre" id="nombre" class="form-control"
           maxlength="80" required
           value="{{ contacto.nombre }}">
    <div class="form-text">Requerido. Solo letras, espacios y acentos. 1–80 caracteres.</div>
  </div>

  <div class="mb-3">
    <label for="correo" class="form-label">Correo electrónico *</label>
    <input type="email" name="correo" id="correo" class="form-control"
           maxlength="120" required
           value="{{ contacto.correo }}">
    <div class="form-text">Requerido. Formato estándar de correo. Máx. 120 caracteres.</div>
  </div>

  <div class="mb-3">
    <label for="telefono" class="form-label">Teléfono *</label>
    <input type="text" name="telefono" id="telefono" class="form-control"
           required
           value="{{ contacto.telefono }}">
    <div class="form-text">Requerido. Dígitos, espacios y “+” opcional. 7–15 dígitos.</div>
  </div>

  <div class="mb-3">
    <label for="etiqueta" class="form-label">Etiqueta</label>
    <select name="etiqueta" id="etiqueta" class="form-select">
      <option value="" {% if not contacto.etiqueta %}selected{% endif %}>(Sin etiqueta)</option>
      <option value="familia" {% if contacto.etiqueta == "familia" %}selected{% endif %}>Familia</option>
      <option value="trabajo" {% if contacto.etiqueta == "trabajo" %}selected{% endif %}>Trabajo</option>
      <option value="amigos" {% if contacto.etiqueta == "amigos" %}selected{% endif %}>Amigos</option>
      <option value="otro" {% if contacto.etiqueta == "otro" %}selected{% endif %}>Otro</option>
    </select>
  </div>

  <div class="mb-3">
    <label for="notas" class="form-label">Notas</label>
    <textarea name="notas" id="notas" rows="3" class="form-control"
              maxlength="500">{{ contacto.notas }}</textarea>
    <div class="form-text">Opcional. Máx. 500 caracteres. No se permiten etiquetas HTML.</div>
  </div>

  <div class="d-flex gap-2">
    <button type="submit" class="btn btn-primary">
      {% if modo == "nuevo" %}Crear{% else %}Guardar cambios{% endif %}
    </button>
    <a href="{{ url_for('lista_contactos') }}" class="btn btn-secondary">Cancelar</a>
  </div>
</form>
{% endblock %}
